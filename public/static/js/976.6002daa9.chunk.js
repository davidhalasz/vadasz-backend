"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[976],{6976:function(e,t,l){l.r(t);var n=l(4165),s=l(5861),a=l(3433),r=l(9439),i=l(3263),o=l(2791),c=l(7689),u=l(5877),d=l(5849),p=l(5094),m=l(1595),h=l(184),x="grayscale object-cover object-center w-full h-full",f="object-cover object-center w-full h-full",v="w-full bg-customRed text-white",b="w-full bg-customBlue text-white";t.default=function(e){var t=(0,c.TH)().state.product,l=[];t.images&&(l=t.images.split(", "));var j=(0,c.s0)(),g=new FileReader,w=(0,o.useState)(l),k=(0,r.Z)(w,2),N=k[0],y=(k[1],(0,o.useState)([])),Z=(0,r.Z)(y,2),C=Z[0],z=Z[1],V=(0,o.useState)([]),T=(0,r.Z)(V,2),I=T[0],E=T[1],L=(0,o.useState)([]),S=(0,r.Z)(L,2),B=S[0],F=S[1],H=(0,o.useState)(""),R=(0,r.Z)(H,2),A=R[0],P=R[1],G=(0,o.useState)(null),M=(0,r.Z)(G,2),U=M[0],D=M[1],O=(0,o.useState)([]),K=(0,r.Z)(O,2),_=K[0],W=K[1],X=(0,o.useState)(t.category),J=(0,r.Z)(X,2),Q=J[0],$=J[1],q=(0,p.c)({title:{value:"",isValid:!1},price:{value:"",isValid:!1},desc:{value:"",isValid:!1}},!1),Y=(0,r.Z)(q,2),ee=Y[0],te=Y[1];g.addEventListener("load",(function(e){var t=g.result,l=(0,a.Z)(_);l.push(t),W(l)}));(0,o.useEffect)((function(){I.length!==_.length&&g.readAsDataURL(U)}),[U,I,_]);var le=function(){var e=(0,s.Z)((0,n.Z)().mark((function e(l){var s,a,r,o;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.preventDefault(),s=ee.inputs.desc.value,a=ee.inputs.title.value,r=ee.inputs.price.value,o=new FormData,I.forEach((function(e,t){!1===B[t]&&o.append("files",e)})),o.append("title",a),o.append("desc",s),o.append("price",r),o.append("category",Q),o.append("deletedImages",C.join(", ")),e.prev=11,e.next=14,i.Z.patch("".concat("http://localhost:4000/api","/product/").concat(t.uuid),o);case 14:j("/kezelofelulet/feltoltott-hirdetesek"),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(11),e.t0.response&&(P(e.t0.response.data.msg),console.log(e.t0.response.data.msg));case 20:case"end":return e.stop()}}),e,null,[[11,17]])})));return function(t){return e.apply(this,arguments)}}();return(0,h.jsxs)(o.Fragment,{children:[(0,h.jsx)("div",{className:"w-full text-center p-4 text-customBlue font-bold text-2xl",children:(0,h.jsx)("h1",{className:"text-customBlue",children:"Hirdet\xe9s szerkeszt\xe9se"})}),(0,h.jsxs)("div",{className:"mx-auto w-10/12",children:[A&&(0,h.jsx)("p",{children:A}),(0,h.jsxs)("form",{onSubmit:le,children:[(0,h.jsxs)("div",{className:"flex flex-wrap -mx-4",children:[(0,h.jsx)("div",{className:"w-full md:w-1/2 lg:w-1/3 px-4",children:(0,h.jsx)("div",{className:"mb-8",children:(0,h.jsxs)("div",{className:"form-control",children:[(0,h.jsx)("label",{className:"block text-customBlue text-sm font-bold mb-2",htmlFor:"category",children:"Kateg\xf3ria"}),(0,h.jsxs)("select",{onChange:function(e){$(e.target.value)},defaultValue:Q,className:"shadow border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",name:"category",id:"category",children:[(0,h.jsx)("option",{value:"fegyverek",children:"Fegyverek"}),(0,h.jsx)("option",{value:"l\u0151szerek",children:"L\u0151szerek"}),(0,h.jsx)("option",{value:"optik\xe1k",children:"Optik\xe1k"}),(0,h.jsx)("option",{value:"\xf6lt\xf6z\xe9kek",children:"\xd6lt\xf6z\xe9kek"}),(0,h.jsx)("option",{value:"vad\xe1szkuty\xe1k",children:"Vad\xe1szkuty\xe1k"}),(0,h.jsx)("option",{value:"j\xe1rm\u0171vek",children:"J\xe1rm\u0171vek"}),(0,h.jsx)("option",{value:"szolg\xe1ltat\xe1sok",children:"Szolg\xe1ltat\xe1sok"}),(0,h.jsx)("option",{value:"kell\xe9kek",children:"Kell\xe9kek"})]})]})})}),(0,h.jsx)("div",{className:"w-full md:w-1/2 lg:w-1/3 px-4",children:(0,h.jsx)("div",{className:"mb-8",children:(0,h.jsx)(d.Z,{id:"price",type:"number",label:"\xc1r",placeholder:"\xc1r",element:"input",validators:[(0,m.hg)()],errorText:"\xc1r megad\xe1sa k\xf6telez\u0151",onInput:te,value:t.price,valid:!0})})}),(0,h.jsx)("div",{className:"w-full px-4",children:(0,h.jsx)("div",{className:"mb-8",children:(0,h.jsx)(d.Z,{id:"title",type:"text",label:"C\xedm",placeholder:"C\xedm",element:"input",validators:[(0,m.CP)(5)],errorText:"C\xedm megad\xe1sa k\xf6telez\u0151",onInput:te,value:t.title,valid:!0})})}),(0,h.jsx)("div",{className:"w-full px-4",children:(0,h.jsx)("div",{className:"mb-8",children:(0,h.jsx)(d.Z,{id:"desc",type:"text",label:"Le\xedr\xe1s",placeholder:"Le\xedr\xe1s",element:"textaera",validators:[(0,m.CP)(5)],errorText:"Le\xedr\xe1s megad\xe1sa k\xf6telez\u0151",onInput:te,value:t.desc,valid:!0})})}),(0,h.jsx)("div",{className:"w-full px-4",children:(0,h.jsxs)("div",{className:"mb-5 w-fit flex",children:[(0,h.jsx)("label",{htmlFor:"kiemelt",className:"font-medium text-base text-black block mb-3",children:"Kiemelt hirdet\xe9s"}),(0,h.jsx)("input",{type:"checkbox",name:"kiemelt",value:"1",className:"border-[1.5px] border-form-stroke ml-2 p-2 font-medium text-body-color placeholder-body-color outline-none focus:border-primary active:border-primary transition disabled:bg-[#F5F7FD] disabled:cursor-default"})]})}),(0,h.jsxs)("div",{className:"w-full md:w-1/2 lg:w-1/3 px-4",children:[(0,h.jsx)("p",{className:"font-medium text-base text-black mb-3",children:"K\xe9pek szerkeszt\xe9se"}),(0,h.jsxs)("div",{className:"flex flex-row gap-2",children:[N&&N.map((function(e,t){return(0,h.jsxs)("div",{className:"border border-mint w-24 h-24 shrink-0",children:[(0,h.jsx)("img",{className:C.includes(e)?x:f,src:"".concat("http://localhost:4000","/").concat(e),alt:"public"}),(0,h.jsx)("button",{type:"button",onClick:function(){return function(e){if(-1===C.indexOf(e))z([].concat((0,a.Z)(C),[e]));else{var t=C.filter((function(t){return t!==e}));z((0,a.Z)(t))}}(e)},className:C.includes(e)?b:v,children:C.includes(e)?"Visszavon\xe1s":"T\xf6rl\xe9s"})]},t)})),_.map((function(e,t){return(0,h.jsxs)("div",{className:"border border-mint w-24 h-24 shrink-0",children:[(0,h.jsx)("img",{className:B[t]?x:f,src:e,alt:"public"}),(0,h.jsx)("button",{type:"button",onClick:function(){return function(e){F((function(t){var l=(0,a.Z)(t);return l[e]=!l[e],l}))}(t)},className:B[t]?b:v,children:B[t]?"Visszavon\xe1s":"T\xf6rl\xe9s"}),(0,h.jsx)("p",{className:"text-customBlue",children:B[t].toString()})]},t)})),(0,h.jsx)(u.Z,{id:"image",onInput:function(e){var t=(0,a.Z)(I);t.push(e),E(t),D(e),F([].concat((0,a.Z)(B),[!1]))},showPreview:!1})]})]})]}),(0,h.jsx)("div",{className:"row",children:(0,h.jsx)("div",{className:"col-md-12 text-right",children:(0,h.jsx)("button",{type:"submit",className:"px-4 bg-customBlue rounded-md text-white text-base px-5 py-2.5",children:"V\xe1ltoztat\xe1sok ment\xe9se"})})})]})]})]})}},5877:function(e,t,l){var n=l(9439),s=l(2791),a=l(184);t.Z=function(e){var t=(0,s.useState)(),l=(0,n.Z)(t,2),r=l[0],i=l[1],o=(0,s.useState)(),c=(0,n.Z)(o,2),u=c[0],d=c[1],p=(0,s.useState)(!0),m=(0,n.Z)(p,2),h=m[0],x=m[1],f=(0,s.useRef)();(0,s.useEffect)((function(){if(r){var t=new FileReader;e.showPreview&&(t.onload=function(){d(t.result)}),t.readAsDataURL(r)}}),[r,e.showPreview]);var v=function(){f.current.click()};return(0,a.jsxs)("div",{className:"form-control",children:[(0,a.jsx)("input",{id:e.id,ref:f,style:{display:"none"},type:"file",accept:".jpg,.jpeg,.png",onChange:function(t){var l;t.target.files||1===t.target.files.length?(l=t.target.files[0],i(l),x(!0)):x(!1),e.onInput(l)}}),(0,a.jsx)("div",{className:"image-upload ".concat(e.center&&"center"),children:(0,a.jsxs)("div",{className:"image-upload__preview w-full flex justify-center",children:[u&&(0,a.jsxs)("div",{className:"w-24 h-24 relative",children:[(0,a.jsx)("button",{type:"button",onClick:function(){i(),d(),e.onInput()},children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"absolute -top-3 -right-3 w-7 h-7 bg-red-500 rounded-full",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,a.jsx)("button",{type:"button",onClick:v,children:(0,a.jsx)("img",{className:"w-24 h-24 object-cover",src:u,alt:"Preview"})})]}),!u&&(0,a.jsx)("button",{type:"button",onClick:v,className:"w-24 h-24 text-customBlue hover:text-mint border rounded-sm border-customBlue hover:border-mint flex items-center",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1",stroke:"currentColor",className:"w-12 h-12 mx-auto",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),!h&&(0,a.jsx)("p",{children:"Nem megfelelo kepformatum"})]})}},5849:function(e,t,l){var n=l(9439),s=l(1413),a=l(2791),r=l(1595),i=l(184),o=function(e,t){switch(t.type){case"CHANGE":return(0,s.Z)((0,s.Z)({},e),{},{value:t.val,isValid:(0,r.Gu)(t.val,t.vaidators)});case"TOUCH":return(0,s.Z)((0,s.Z)({},e),{},{isTouched:!0});default:return e}};t.Z=function(e){var t=(0,a.useReducer)(o,{value:e.value||"",isTouched:!1,isValid:e.valid||!1}),l=(0,n.Z)(t,2),s=l[0],r=l[1],c=e.id,u=e.onInput,d=s.value,p=s.isValid;(0,a.useEffect)((function(){u(c,d,p)}),[c,u,d,p]);var m=function(t){r({type:"CHANGE",val:t.target.value,vaidators:e.validators})},h=function(){r({type:"TOUCH"})},x="input"===e.element?(0,i.jsx)("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline ".concat(!s.isValid&&s.isTouched&&"border-red-500"),id:e.id,type:e.type,placeholder:e.placeholder,onChange:m,onBlur:h,value:s.value}):(0,i.jsx)("textarea",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline ".concat(!s.isValid&&s.isTouched&&"border-red-500"),id:e.id,rows:e.rows||6,onChange:m,onBlur:h,value:s.value});return(0,i.jsxs)("div",{className:"form-control",children:[(0,i.jsx)("label",{className:"block text-customBlue text-sm font-bold mb-2",htmlFor:e.id,children:e.label}),x,!s.isValid&&s.isTouched&&(0,i.jsx)("p",{className:"text-red-500",children:e.errorText})]})}},5094:function(e,t,l){l.d(t,{c:function(){return o}});var n=l(9439),s=l(4942),a=l(1413),r=l(2791),i=function(e,t){if("INPUT_CHANGE"===t.type){var l=!0;for(var n in e.inputs)l=n===t.inputId?l&&t.isValid:l&&e.inputs[n].isValid;return(0,a.Z)((0,a.Z)({},e),{},{inputs:(0,a.Z)((0,a.Z)({},e.inputs),{},(0,s.Z)({},t.inputId,{value:t.value,isValid:t.isValid})),isValid:l})}return e},o=function(e,t){var l=(0,r.useReducer)(i,{inputs:e,isValid:t}),s=(0,n.Z)(l,2),a=s[0],o=s[1];return[a,(0,r.useCallback)((function(e,t,l){o({type:"INPUT_CHANGE",value:t,isValid:l,inputId:e})}),[])]}},1595:function(e,t,l){l.d(t,{CP:function(){return u},Gu:function(){return d},Ox:function(){return c},hg:function(){return o}});var n=l(7762),s="REQUIRE",a="MINLENGTH",r="MAXLENGTH",i="EMAIL",o=function(){return{type:s}},c=function(){return{type:i}},u=function(e){return{type:a,val:e}},d=function(e,t){var l,o=!0,c=(0,n.Z)(t);try{for(c.s();!(l=c.n()).done;){var u=l.value;u.type===s&&(o=o&&e.trim().length>0),u.type===a&&(o=o&&e.trim().length>=u.val),u.type===r&&(o=o&&e.trim().length<=u.val),"MIN"===u.type&&(o=o&&+e>=u.val),"MAX"===u.type&&(o=o&&+e<=u.val),u.type===i&&(o=o&&/^[\w-]+@([\w-]+\.)+[\w-]{2,4}$/.test(e))}}catch(d){c.e(d)}finally{c.f()}return o}}}]);
//# sourceMappingURL=976.6002daa9.chunk.js.map